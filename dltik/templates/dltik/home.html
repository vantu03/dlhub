{% extends "dltik/base.html" %}
{% load static %}
{% block content %}
<div class="text-center p-0">
    <div class="bg-primary bg-opacity-10 border rounded p-4 shadow-sm">
        <h1 class="mb-3 text-primary fw-bold">Tải video TikTok</h1>
        <p class="lead text-dark mb-3">
            Download Video TikTok không logo, ID - Chất lượng HD - Miễn phí
        </p>

        <div class="mx-auto position-relative" style="max-width: 850px;" id="input-container">
            <!-- Input + Dán + Clear -->
            <div class="input-group input-group-lg mb-3 border rounded overflow-hidden shadow-sm">
                <input type="url"
                       name="video_url"
                       id="video-url-input"
                       class="form-control border-0"
                       placeholder="Dán liên kết video tại đây..."
                       required>

                <!-- Nút Dán (hiện mặc định) -->
                <button type="button"
                        class="btn btn-outline-primary border-0 border-start"
                        id="paste-btn">
                    <i class="bi bi-clipboard"></i> Dán
                </button>

                <!-- Nút Xoá (ẩn mặc định, sẽ show bằng JS) -->
                <button type="button"
                        class="btn btn-danger border-0 border-start d-none"
                        id="clear-btn">
                    <i class="bi bi-x-circle"></i> Xoá
                </button>
            </div>

            <!-- Nút Tải -->
            <div class="text-center">
                <button type="button" class="btn btn-primary btn-lg shadow-sm px-5" id="download-btn">
                    <i class="bi bi-download me-1"></i> Tải video
                </button>
            </div>
        </div>
        <div class="progress mt-3 d-none" style="height: 8px;" id="progress-wrapper">
          <div class="progress-bar progress-bar-striped progress-bar-animated"
               role="progressbar"
               style="width: 0%;"
               id="progress-bar"></div>
        </div>

    </div>

    <!-- Kết quả -->
    <div id="alert-container" class="mt-5"></div>

    <div class="container d-none" id="preview-container">
        <div class="d-flex flex-wrap align-items-start justify-content-between bg-light rounded p-3 shadow-sm mb-4 gap-3 text-start">
            <!-- Bên trái: thumbnail + title -->
            <div class="d-flex align-items-start gap-3 flex-grow-1 min-w-0">
                <img id="video-thumbnail" class="rounded"
                     style="width: 120px; height: 120px; object-fit: cover;" alt="Thumbnail">

                <!-- Bọc trong một div có min-width và overflow đúng -->
                <div class="flex-grow-1 min-w-0">
                    <h6 id="video-title"
                        class="mb-1 fw-bold"
                        style="display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">

                    </h6>

                    <small class="text-muted">TikTok</small>
                </div>
            </div>


            <!-- Bên phải: nút tải -->
            <div class="d-flex flex-column gap-2 flex-shrink-0">
                <div id="download-buttons">
                    <!-- JS gắn nút tại đây -->
                </div>
                <a href="" class="btn btn-success d-flex align-items-start justify-content-start gap-2">
                    <i class="bi bi-plus-circle"></i>
                    Tải video khác
                </a>
            </div>
        </div>

        <div id="photo-preview" class="row row-cols-1 row-cols-md-3 g-4 mb-4"></div>
    </div>

    <!-- Giới thiệu -->
    <section class="mt-5 text-start" style="margin: auto;"><div class="mt-5 bg-white p-4 rounded shadow-sm" id="how-to-download">
        <h2 class="h5 fw-bold">DLHub.Vn là gì?</h2>
        <p>
            <strong>DLHub.Vn</strong> là công cụ hàng đầu giúp <strong>tải video TikTok không logo</strong>,
            <strong>download ảnh TikTok HD</strong> và <strong>tải nhạc TikTok MP3</strong> hoàn toàn <strong>miễn phí</strong>, tương tự như <strong>SnapTik</strong>.
            Nền tảng được tối ưu cho tốc độ cao và giao diện đơn giản, giúp bạn dễ dàng <strong>tải video TikTok</strong> chất lượng cao
            <strong>không cần cài đặt phần mềm</strong>, <strong>không cần đăng nhập tài khoản</strong>.
        </p>
        <p>
            <strong>DLHub.Vn</strong> hỗ trợ tải nội dung TikTok trên mọi thiết bị như điện thoại, máy tính bảng và máy tính để bàn.
            Người dùng chỉ cần <strong>dán link video TikTok</strong>, chọn định dạng mong muốn như <strong>video MP4</strong>,
            <strong>ảnh JPG</strong> hoặc <strong>âm thanh MP3</strong>, hệ thống sẽ xử lý và cho phép bạn <strong>download về thiết bị</strong> một cách nhanh chóng.
        </p>

        <h3 class="h6 mt-4 fw-bold">Tính năng nổi bật của DLHub.Vn:</h3>
        <ul>
            <li>Download video TikTok không dính logo (no watermark)</li>
            <li>Tải ảnh từ TikTok chất lượng cao</li>
            <li>Tải nhạc TikTok dạng MP3 nhanh chóng</li>
            <li>Hỗ trợ mọi thiết bị: Android, iOS, Windows, macOS</li>
            <li>Không cần cài ứng dụng, không cần tài khoản</li>
            <li>Hoàn toàn miễn phí, nhanh chóng và bảo mật</li>
        </ul>

        <h2 class="h4 fw-bold text-primary mb-3">Hướng dẫn tải video TikTok không logo với DLHub.Vn</h2>
        <ol class="ps-3">
            <li><strong>Sao chép liên kết video TikTok</strong> mà bạn muốn tải.</li>
            <li><strong>Dán liên kết</strong> vào ô tìm kiếm trên trang chủ <strong>DLHub.Vn</strong>.</li>
            <li>Nhấn nút <strong>"Tải video"</strong> để hệ thống xử lý và hiển thị các tùy chọn tải về.</li>
            <li>Chọn định dạng: <strong>Video MP4</strong>, <strong>Ảnh JPG</strong> hoặc <strong>Nhạc MP3</strong>.</li>
            <li>Nhấn <strong>"Download"</strong> để lưu về thiết bị của bạn.</li>
        </ol>

        <p class="mt-3 text-muted small">
            Với <strong>DLHub.Vn</strong>, bạn có thể dễ dàng tải video TikTok không logo chất lượng HD, tải ảnh và nhạc TikTok MP3 miễn phí, không cần đăng ký hay cài đặt phần mềm. Công cụ thay thế hoàn hảo cho SnapTik.
        </p>
    </div>

    </section>
      {% if pinned_articles %}
        <section class="mt-5 text-start">
          <div class="bg-white p-4 rounded shadow-sm">
            <h2 class="mb-4 fw-bold text-primary">Đáng chú ý</h2>
            <div class="list-group">
              {% for pinned in pinned_articles %}
                <a href="{% url 'article' slug=pinned.article.slug %}" class="list-group-item list-group-item-action py-3 border rounded mb-3 shadow-sm">
                  <div class="d-flex align-items-start gap-3">
                    {% if pinned.article.thumbnail %}
                      <img src="{{ pinned.article.thumbnail }}" alt="{{ pinned.article.title }}"
                           class="rounded" style="width: 100px; height: 100px; object-fit: cover;">
                    {% endif %}
                    <div>
                      <h5 class="fw-bold mb-1">
                        {{ pinned.article.title }}
                      </h5>
                      <p class="text-muted small mb-1">{{ pinned.article.summary }}</p>
                        {% if pinned.note %}
                              <small class="text-secondary fst-italic">
                                  {{ pinned.note }}
                              </small>
                        {% endif %}
                    </div>
                  </div>
                </a>
              {% endfor %}
            </div>
          </div>
        </section>
      {% endif %}
</div>
{% endblock %}
{% block extra_scripts %}
<script src="{% static 'js/djs.js' %}?v9"></script>
<script src="https://cdn.jsdelivr.net/npm/linkifyjs@3.0.3/dist/linkify.min.js"></script>
{% endblock %}